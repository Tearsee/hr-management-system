<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .el-header {
            background-color: #B3C0D1;
            color: #333;
            line-height: 60px;
        }

        .el-aside {
            color: #333;
        }
    </style>


    <style>
        .text {
            font-size: 14px;
        }

        .item {
            padding: 18px 0;
        }

        .box-card {
            width: 480px;
        }
    </style>

    <!--上传头像-->
    <style scoped>
        .avatar-uploader {
            border: 1px dashed #d9d9d9;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            width: 178px;
            height: 178px;
        }

        .avatar-uploader .el-upload:hover {
            border-color: #409eff;
        }

        .avatar-uploader-icon {
            font-size: 28px;
            color: #8c939d;
            width: 178px;
            height: 178px;
            line-height: 178px;
            text-align: center;
        }

        .avatar {
            width: 178px;
            height: 178px;
            display: block;
        }
    </style>

    <!--新版卡片-->
    <style>
        .text {
            font-size: 14px;
        }

        .item {
            margin-bottom: 18px;
        }

        .clearfix:before,
        .clearfix:after {
            display: table;
            content: "";
        }

        .clearfix:after {
            clear: both
        }

        .box-card {
            width: 480px;
        }
    </style>

    <!--布局栅栏-->
    <style>
        .el-row {
            margin-bottom: 20px;

            &:last-child {
                margin-bottom: 0;
            }
        }

        .el-col {
            border-radius: 4px;
        }

        .bg-purple-dark {
            background: #99a9bf;
        }

        .bg-purple {
            background: #d3dce6;
        }

        .bg-purple-light {
            background: #e5e9f2;
        }

        .grid-content {
            border-radius: 4px;
            min-height: 36px;
        }

        .row-bg {
            padding: 10px 0;
            background-color: #f9fafc;
        }
    </style>
</head>
<body>
<div id="app">

    <el-container style="height: 500px; border: 1px solid #eee">
        <el-header style="text-align: right; font-size: 12px">
            <el-dropdown>
                <i class="el-icon-user" style="margin-right: 15px"></i>
                <el-dropdown-menu slot="dropdown">
                    <el-dropdown-item>查看</el-dropdown-item>
                    <el-dropdown-item>新增</el-dropdown-item>
                    <el-dropdown-item>删除</el-dropdown-item>
                </el-dropdown-menu>
            </el-dropdown>
        </el-header>

        <el-container>
            <el-aside width="200px" style="background-color: rgb(238, 241, 246)">
                <el-menu :default-openeds="['1', '3']">
                    <el-submenu index="1">
                        <template slot="title"><i class="el-icon-message"></i>导航一</template>
                        <el-menu-item-group>
                            <template slot="title">分组一</template>
                            <el-menu-item index="1-1">选项1</el-menu-item>
                            <el-menu-item index="1-2">选项2</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="分组2">
                            <el-menu-item index="1-3">选项3</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="1-4">
                            <template slot="title">选项4</template>
                            <el-menu-item index="1-4-1">选项4-1</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="2">
                        <template slot="title"><i class="el-icon-menu"></i>导航二</template>
                        <el-menu-item-group>
                            <template slot="title">分组一</template>
                            <el-menu-item index="2-1">选项1</el-menu-item>
                            <el-menu-item index="2-2">选项2</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="分组2">
                            <el-menu-item index="2-3">选项3</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="2-4">
                            <template slot="title">选项4</template>
                            <el-menu-item index="2-4-1">选项4-1</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                    <el-submenu index="3">
                        <template slot="title"><i class="el-icon-setting"></i>导航三</template>
                        <el-menu-item-group>
                            <template slot="title">分组一</template>
                            <el-menu-item index="3-1">选项1</el-menu-item>
                            <el-menu-item index="3-2">选项2</el-menu-item>
                        </el-menu-item-group>
                        <el-menu-item-group title="分组2">
                            <el-menu-item index="3-3">选项3</el-menu-item>
                        </el-menu-item-group>
                        <el-submenu index="3-4">
                            <template slot="title">选项4</template>
                            <el-menu-item index="3-4-1">选项4-1</el-menu-item>
                        </el-submenu>
                    </el-submenu>
                </el-menu>
            </el-aside>

            <el-container>
                <el-main>

                    <el-card class="box-card">
                        <span>个人资料信息</span>
                        <span style="float: right">编辑个人资料信息</span>
                        <el-divider></el-divider>
                        <span property="">工号</span>
                        <span style="float: right">{{employee.staffId}}</span>
                        <el-divider></el-divider>
                        <span>年龄</span>
                        <span style="float: right">{{employee.age}}</span>
                        <el-divider></el-divider>
                        <span>邮箱</span>
                        <span style="float: right">{{employee.email}}</span>
                        <el-divider></el-divider>
                        <span>手机号</span>
                        <span style="float: right">{{employee.phone}}</span>
                        <el-divider></el-divider>
                        <span>部门ID</span>
                        <span style="float: right">{{employee.deptId}}</span>
                        <el-divider></el-divider>
                        <span>职位ID</span>
                        <span style="float: right">{{employee.posId}}</span>
                        <el-divider></el-divider>
                        <span>在职状态</span>
                        <span style="float: right">{{employee.employmentStatus}}</span>
                    </el-card>
                </el-main>

                <el-divider></el-divider>

                <el-footer height="500px">
                    <el-card class="box-card">
                        <!-- <div slot="header" class="clearfix">
                             <span>卡片名称</span>
                             <el-button style="float: right; padding: 3px 0" type="text">操作按钮</el-button>
                         </div>
                         <div v-for="o in 4" :key="o" class="text item">
                             {{'列表内容 ' + o }}
                         </div>
                         -->
                        <!--更新版-->
                        <div slot="header">

                            <el-form :model="form">
                                <el-form-item label="路径" prop="url">
                                    <el-upload
                                            class="avatar-uploader"
                                            action=""
                                            :http-request="field101BeforeUpload"
                                            :show-file-list="false"
                                    >
                                        <img v-if="imageUrl" :src="imageUrl" class="avatar"/>
                                        <i v-else class="el-icon-plus avatar-uploader-icon"></i>
                                    </el-upload>
                                </el-form-item>
                            </el-form>


                        </div>
                        <div class="clearfix">
                            <h7>
                                <span>全名</span>
                            </h7>
                            <el-button style="float: right; padding: 3px 0" type="text">编辑名称</el-button>
                        </div>

                    </el-card>
                </el-footer>

            </el-container>


        </el-container>
    </el-container>

</div>


<script src="js/vue.js"></script>
<script src="element-ui/lib/index.js"></script>
<link rel="stylesheet" href="element-ui/lib/theme-chalk/index.css">

<script src="js/axios-0.18.0.js"></script>

<script>

    new Vue({
        el: "#app",
        mounted() {
            this.selectOneById();
        },
        data() {
            const item = {
                date: '2016-05-02',
                name: '王小虎',
                address: '上海市普陀区金沙江路 1518 弄'
            };
            return {
                size: '',
                tableData: Array(20).fill(item),
                currentDate: new Date(),
                imageUrl: "",
                form: {},
                tableData: [{
                    date: '2016-05-02',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1518 弄'
                }, {
                    date: '2016-05-04',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1517 弄'
                }, {
                    date: '2016-05-01',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1519 弄'
                }, {
                    date: '2016-05-03',
                    name: '王小虎',
                    address: '上海市普陀区金沙江路 1516 弄'
                }],

                message: 'Hello, Vue!',
                // 品牌模型数据
                employee: {
                    id: '',
                    staffId: '',
                    employeeName: '',
                    age: "",
                    employmentStatus: "",
                    email: "",
                    phone: "",
                    deptId: "",
                    posId: ""
                },
            }
        },
        methods: {
            //上传图片
            field101BeforeUpload(file) {
                var formData = new FormData();
                formData.append("file", file.file);
                //请求上传接口 pic()
                pic(formData).then((res) => {
                    this.imageUrl = res.msg;
                });
            },

            /** 修改按钮操作 */
            handleUpdate(row) {
                this.reset();
                this.fileList = [];
                const id = row.id || this.ids;
                getXssUpload(id).then((response) => {
                    this.form = response.data;
                    //注意
                    this.imageUrl = this.form.url
                });
            },
            /** 提交按钮 */
            submitForm() {
                this.$refs["form"].validate((valid) => {
                    if (valid) {
                        if (this.form.id != null) {
                            //注意提交时要把图片地址赋过来
                            this.form.url = this.imageUrl;
                            //修改保存
                            updateXssUpload(this.form).then((response) => {
                            });
                        } else {
                            //注意提交时要图片把地址赋过来
                            this.form.url = this.imageUrl;
                            //添加保存接口
                            addXssUpload(this.form).then((response) => {
                                this.$modal.msgSuccess("新增成功");
                            });
                        }
                    }
                });
            },
            // 员工个人查询
            selectOneById() {
                axios({
                    method: "post",
                    url: "http://localhost:8080/hr-management-system/employee/selectOneById?id=1"
                }).then(resp => {
                        // 设置数据
                        this.employee.id = resp.data.id;
                        this.employee.staffId = resp.data.staffId;
                        this.employee.employeeName = resp.data.employeeName;
                        this.employee.age = resp.data.age;
                        this.employee.employmentStatus = resp.data.employmentStatus;
                        this.employee.email = resp.data.email;
                        this.employee.phone = resp.data.phone;
                        this.employee.deptId = resp.data.deptId;
                        this.employee.posId = resp.data.posId;
                    }
                )
            }
        }
    })

</script>


</body>
</html>